# Show Day Default Behavior Implementation\n\n## Problem Solved\n\nThe original dilemma was:\n- **Want**: Show days pre-selected as defaults (most common scenario)\n- **Issue**: Pre-selected dates would auto-confirm everyone (unintended)\n- **Need**: Smart defaults without accidental confirmations\n\n## Solution: Greyed-Out Show Days\n\nImplemented a \"suggested but not selected\" state for show days:\n\n### **Visual States**\n1. **Greyed-Out Show Day** (initial state)\n   - Show day appears with dashed border and muted colors\n   - Indicates \"suggested\" but not \"selected\"\n   - Does NOT count toward confirmation\n\n2. **Selected Show Day** (after other dates picked)\n   - Show day becomes fully highlighted\n   - Automatically included when other dates are selected\n   - Counts toward confirmation\n\n3. **Manually Selected Show Day**\n   - User can click greyed-out show day to select it directly\n   - Becomes highlighted and counts toward confirmation\n\n## User Experience Flow\n\n### **Scenario 1: User selects rehearsal days**\n1. **Initial**: Show day is greyed-out (suggested)\n2. **User clicks**: Rehearsal day (e.g., 12/1)\n3. **Auto-behavior**: Show day (12/3) becomes highlighted too\n4. **Result**: Both rehearsal and show days are selected\n5. **Confirmation**: \"Confirm (1)\" button becomes active\n\n### **Scenario 2: User only wants show day**\n1. **Initial**: Show day is greyed-out (suggested)\n2. **User clicks**: Show day directly\n3. **Result**: Show day becomes highlighted\n4. **Confirmation**: \"Confirm (1)\" button becomes active\n\n### **Scenario 3: User wants neither**\n1. **Initial**: Show day is greyed-out (suggested)\n2. **User action**: Doesn't click anything\n3. **Result**: No dates selected, show day stays greyed\n4. **Confirmation**: \"Confirm (0)\" button stays disabled\n\n## Technical Implementation\n\n### **State Management**\n```typescript\ninterface TeamMemberAvailability {\n  assignmentId: string\n  fullName: string\n  role: string\n  availableDates: Date[]  // Only actually selected dates\n}\n```\n\n### **Greyed-Out Detection**\n```typescript\nconst isShowDayGreyedOut = (assignmentId: string, date: Date) => {\n  const teamMember = teamAvailabilities.find(t => t.assignmentId === assignmentId)\n  const isShowDay = projectSchedule.showDates.some(showDate => \n    showDate.getTime() === date.getTime()\n  )\n  const isSelected = teamMember.availableDates.some(selectedDate => \n    selectedDate.getTime() === date.getTime()\n  )\n  \n  // Greyed out if: show day + not selected + no other dates selected\n  return isShowDay && !isSelected && teamMember.availableDates.length === 0\n}\n```\n\n### **Auto-Selection Logic**\n```typescript\nconst handleDateToggle = (assignmentId: string, date: Date) => {\n  // ... existing logic ...\n  \n  // If this is NOT a show day being selected, also auto-select show days\n  if (!isShowDay && item.availableDates.length === 0) {\n    // First non-show day selected, add show days too\n    const showDatesToAdd = projectSchedule.showDates.filter(showDate => \n      !item.availableDates.some(selectedDate => \n        selectedDate.getTime() === showDate.getTime()\n      )\n    )\n    newDates = [...newDates, ...showDatesToAdd]\n  }\n}\n```\n\n### **Visual Styling**\n```typescript\n// Three distinct visual states\nclassName={cn(\n  \"w-10 h-10 text-sm rounded-full border-2 transition-all duration-200\",\n  isSelected \n    ? \"bg-primary border-primary text-primary-foreground\"        // Selected\n    : isGreyedOut\n    ? \"bg-muted/50 border-muted text-muted-foreground border-dashed\" // Suggested\n    : \"bg-transparent border-border text-foreground\"              // Normal\n)}\n```\n\n## Visual Design\n\n### **Date Button States**\n\n**Selected Date:**\n```\n┌─────────┐\n│  12/1   │  ← Solid border, primary color\n└─────────┘\n```\n\n**Greyed-Out Show Day:**\n```\n┌┄┄┄┄┄┄┄┄┄┐\n┊  12/3   ┊  ← Dashed border, muted color\n└┄┄┄┄┄┄┄┄┄┘\n```\n\n**Normal Date:**\n```\n┌─────────┐\n│  12/2   │  ← Normal border, standard color\n└─────────┘\n```\n\n### **Tooltips**\n- Show days: \"12/3/2024 (Show Day)\"\n- Rehearsal days: \"12/1/2024 (Rehearsal)\"\n- Clear indication of day type\n\n## Benefits\n\n### **User Experience**\n- ✅ **Smart Defaults**: Show days are visually suggested\n- ✅ **No Accidents**: Greyed-out dates don't trigger confirmations\n- ✅ **Intuitive**: Visual feedback makes behavior clear\n- ✅ **Flexible**: Users can select any combination they want\n\n### **Workflow Efficiency**\n- ✅ **Common Case Optimized**: Rehearsal + show day selection is one click\n- ✅ **Show-Only Case**: Direct show day selection works\n- ✅ **Custom Cases**: Full flexibility for unusual schedules\n\n### **Error Prevention**\n- ✅ **No Auto-Confirmations**: Greyed-out state prevents accidents\n- ✅ **Clear Intent**: Only highlighted dates count\n- ✅ **Visual Feedback**: Users see exactly what will be confirmed\n\n## Edge Cases Handled\n\n### **Single-Day Projects**\n- Show day = project day\n- Appears greyed-out initially\n- Must be clicked to select\n- No auto-selection behavior\n\n### **Multi-Day Projects**\n- Show day = last day\n- Rehearsal days = all other days\n- Auto-selection when rehearsal days picked\n- Can still manually select show day only\n\n### **Complex Schedules**\n- Users can deselect auto-selected show days\n- Users can select any combination\n- Visual feedback always accurate\n\n## Files Modified\n\n1. **`components/projects/mass-availability-popup.tsx`**\n   - Added `isShowDayGreyedOut` helper function\n   - Modified `handleDateToggle` with auto-selection logic\n   - Replaced `CircularDateSelector` with custom implementation\n   - Added three-state visual styling (selected/greyed/normal)\n   - Added show day tooltips\n\n2. **`summaries/SHOW_DAY_DEFAULT_BEHAVIOR.md`**\n   - This documentation file\n\n## Testing Scenarios\n\n### **Test Case 1: Rehearsal Day Selection**\n1. Open mass confirmation popup\n2. Verify show days are greyed-out (dashed border)\n3. Click a rehearsal day\n4. Verify show day becomes highlighted (solid border)\n5. Verify \"Confirm (1)\" button is active\n\n### **Test Case 2: Show Day Only**\n1. Open mass confirmation popup\n2. Click greyed-out show day directly\n3. Verify it becomes highlighted\n4. Verify \"Confirm (1)\" button is active\n\n### **Test Case 3: No Selection**\n1. Open mass confirmation popup\n2. Don't click any dates\n3. Verify show days stay greyed-out\n4. Verify \"Confirm (0)\" button stays disabled\n\n### **Test Case 4: Deselection**\n1. Select rehearsal day (auto-selects show day)\n2. Click show day to deselect it\n3. Verify only rehearsal day remains selected\n4. Verify \"Confirm (1)\" button reflects correct count\n\n## Conclusion\n\nThe greyed-out show day approach perfectly solves the original dilemma:\n\n- **Provides smart defaults** without forcing selections\n- **Prevents accidental confirmations** through visual distinction\n- **Maintains flexibility** for all use cases\n- **Improves workflow efficiency** for common scenarios\n- **Clear visual feedback** makes behavior intuitive\n\nThis implementation gives users the best of both worlds: helpful defaults when they want them, and complete control when they need it."